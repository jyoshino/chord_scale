<html>
<head>
<script src="chibi-min.js"></script>
</head>

<body>
<h2>Chords & Scales</h2>

<svg width="16cm" height="4cm" viewBox="0 0 200 50">

<rect x="5" y="0" width="10" height="40" stroke="black" fill="white"/>
<rect x="15" y="0" width="10" height="40" stroke="black" fill="white"/>
<rect x="25" y="0" width="10" height="40" stroke="black" fill="white"/>
<rect x="35" y="0" width="10" height="40" stroke="black" fill="white"/>
<rect x="45" y="0" width="10" height="40" stroke="black" fill="white"/>
<rect x="55" y="0" width="10" height="40" stroke="black" fill="white"/>
<rect x="65" y="0" width="10" height="40" stroke="black" fill="white"/>
<rect x="75" y="0" width="10" height="40" stroke="black" fill="white"/>
<rect x="85" y="0" width="10" height="40" stroke="black" fill="white"/>
<rect x="95" y="0" width="10" height="40" stroke="black" fill="white"/>
<rect x="105" y="0" width="10" height="40" stroke="black" fill="white"/>
<rect x="115" y="0" width="10" height="40" stroke="black" fill="white"/>
<rect x="125" y="0" width="10" height="40" stroke="black" fill="white"/>
<rect x="135" y="0" width="10" height="40" stroke="black" fill="white"/>
<rect x="145" y="0" width="10" height="40" stroke="black" fill="white"/>
<rect x="11" y="0" width="6" height="23" stroke="black" fill="black"/>
<rect x="23" y="0" width="6" height="23" stroke="black" fill="black"/>
<rect x="41" y="0" width="6" height="23" stroke="black" fill="black"/>
<rect x="52" y="0" width="6" height="23" stroke="black" fill="black"/>
<rect x="63" y="0" width="6" height="23" stroke="black" fill="black"/>
<rect x="81" y="0" width="6" height="23" stroke="black" fill="black"/>
<rect x="93" y="0" width="6" height="23" stroke="black" fill="black"/>
<rect x="111" y="0" width="6" height="23" stroke="black" fill="black"/>
<rect x="122" y="0" width="6" height="23" stroke="black" fill="black"/>
<rect x="133" y="0" width="6" height="23" stroke="black" fill="black"/>

<circle id="C1"  fill="red" cx="10" cy="35" r="3"/>
<circle id="Db1" fill="red" cx="14" cy="19" r="3"/>

<circle id="D1"  fill="red" cx="20" cy="35" r="3"/>
<circle id="Eb1" fill="red" cx="26" cy="19" r="3"/>

<circle id="E1" fill="red" cx="30" cy="35" r="3"/>

<circle id="F1" fill="red" cx="40" cy="35" r="3"/>
<circle id="Gb1" fill="red" cx="44" cy="19" r="3"/>

<circle id="G1" fill="red" cx="50" cy="35" r="3"/>
<circle id="Ab1" fill="red" cx="55" cy="19" r="3"/>

<circle id="A1" fill="red" cx="60" cy="35" r="3"/>
<circle id="Bb1" fill="red" cx="66" cy="19" r="3"/>

<circle id="B1" fill="red" cx="70" cy="35" r="3"/>

<circle id="C2" fill="red" cx="80" cy="35" r="3"/>

<circle id="Db2" fill="red" cx="84" cy="19" r="3"/>

<circle id="D2"  fill="red" cx="90" cy="35" r="3"/>
<circle id="Eb2" fill="red" cx="96" cy="19" r="3"/>

<circle id="E2" fill="red" cx="100" cy="35" r="3"/>

<circle id="F2" fill="red" cx="110" cy="35" r="3"/>
<circle id="Gb2" fill="red" cx="114" cy="19" r="3"/>

<circle id="G2" fill="red" cx="120" cy="35" r="3"/>
<circle id="Ab2" fill="red" cx="125" cy="19" r="3"/>

<circle id="A2" fill="red" cx="130" cy="35" r="3"/>
<circle id="Bb2" fill="red" cx="136" cy="19" r="3"/>

<circle id="B2" fill="red" cx="140" cy="35" r="3"/>

<circle id="C3" fill="red" cx="150" cy="35" r="3"/>
</svg>

<br>
Root:
<form>
<select id="key" onchange="change_root()">
<option value="0" selected>C</option>
<option value="1" >C#</option>
<option value="2">D</option>
<option value="3">Eb</option>
<option value="4">E</option>
<option value="5">F</option>
<option value="6">F#</option>
<option value="7">G</option>
<option value="8">Ab</option>
<option value="9">A</option>
<option value="10">Bb</option>
<option value="11">B</option>
</select>
</form>

Scale:
<form>
<select id="scale" onchange="change_scale()">
<option value="non_scale"></option>
<optgroup label="for M7">
<option value="major" selected>Major</option>
<option value="lydian">Lydian</option>
<optgroup label="for 7th">
<option value="mixolydian">Mixolydian</option>
<option value="lydian7th">Lydian 7h</option>
<option value="altered">Altered</option>
<option value="harmonic_p5">Harmonic Minor P5</option>
<option value="comdiminished">Com.Diminished</option>
<option value="wholetone">Wholetone</option>
<option value="mixolydianb6">Mixolydian b6</option>
<optgroup label="for minor">
<option value="minor">Minor</option>
<option value="dorian">Dorian</option>
<option value="phrygian">Phrygian</option>
<option value="melodicminor">Melodic Minor</option>
<option value="harmonicminor">Harmonic Minor</option>
<optgroup label="for minor b5">
<option value="locrian">Locrian</option>
<option value="locrian_2">Locrian#2</option>
<optgroup label="Pentatonic">
<option value="penta">Major Pentatonic</option>
<option value="minorpenta">Minor Pentatonic</option>
<optgroup label="other">
<option value="diminished">Diminished</option>
<option value="blues">Blues</option>
</select>
</form>

Chord:
<form>
<select id="chord" onchange="change_chord()">
<option value="non_chord" selected></option>
<optgroup label="Triads">
<option value="major">Major</option>
<option value="minor">m</option>
<option value="aug">aug</option>
<option value="dim">m-5</option>
<option value="sus4">sus4</option>
<optgroup label="Seventh Chords">
<option value="major7th">M7</option>
<option value="seventh">7th</option>
<option value="minor7th">m7</option>
<option value="minor7thb5">m7-5</option>
<option value="minorM7">mM7</option>
<option value="seventhsus4">7sus4</option>
<option value="dim7">dim7</option>
<option value="dimM7">dimM7</option>
<option value="aug7">aug7</option>
<option value="augM7">augM7</option>
</select>
</form>

<p id="c">Chord and Scale:</p>
<form>
<select id="chord_scale" onchange="change_chord_scale()">
<option value="0" selected></option>
<optgroup label="for M7">
<option value="major">Major</option>
<option value="lydian">Lydian</option>
<optgroup label="for 7th">
<option value="mixolydian">Mixolydian</option>
<option value="lydian7th">Lydian 7th</option>
<option value="altered">Altered</option>
<option value="harmonic_p5">Harmonic Minor P5</option>
<option value="comdiminished">Com.Diminished</option>
<option value="wholetone">Wholetone</option>
<option value="mixolydianb6">Mixolydian b6</option>
<optgroup label="for minor 7th">
<option value="minor">Minor</option>
<option value="dorian">Dorian</option>
<option value="phrygian">Phrygian</option>
<optgroup label="for minor 7th b5">
<option value="locrian">Locrian</option>
<option value="locrian_2">Locrian#2</option>

</select>
</form>

<script>
    var id=["#C1","#Db1","#D1","#Eb1","#E1","#F1","#Gb1","#G1","#Ab1","#A1","#Bb1","#B1",
            "#C2","#Db2","#D2","#Eb2","#E2","#F2","#Gb2","#G2","#Ab2","#A2","#Bb2","#B2","#C3"];
    var root=0;
    var scale_num="major";
    var chord_num="non_chord";
    var scale={};
    scale.non_scale=[];
    scale.lydian=[0,2,4,6,7,9,11,12];
    scale.mixolydian=[0,2,4,5,7,9,10,12];
    scale.mixolydianb6=[0,2,4,5,7,8,10,12];
    scale.major=[0,2,4,5,7,9,11,12];
    scale.minor=[0,2,3,5,7,8,10,12];
    scale.dorian=[0,2,3,5,7,9,10,12];
    scale.phrygian=[0,1,3,5,7,8,10,12];
    scale.locrian=[0,1,3,5,6,8,10,12];
    scale.locrian_2=[0,2,3,5,6,8,10,12];
    scale.melodicminor=[0,2,3,5,7,9,11,12];
    scale.harmonicminor=[0,2,3,5,7,8,11,12];
    scale.wholetone=[0,2,4,6,8,10,12];
    scale.diminished=[0,2,3,5,6,8,9,11,12];
    scale.blues=[0,3,5,6,7,10,12];
    scale.lydian7th=[0,2,4,6,7,9,10,12];
    scale.altered=[0,1,3,4,6,8,10,12];
    scale.comdiminished=[0,1,3,4,6,7,9,10,12];
    scale.harmonic_p5=[0,1,4,5,7,8,10,12];
    scale.penta=[0,2,4,7,9,12];
    scale.minorpenta=[0,3,5,7,10,12];

    var chord={};
    chord.non_chord=[];
    chord.major7th=[0,4,7,11];
    chord.seventh=[0,4,7,10];
    chord.seventh2=[0,4,10];
    chord.seventhsus4=[0,5,7,10];
    chord.minor7th=[0,3,7,10];
    chord.minorM7=[0,3,7,11];
    chord.minor7thb5=[0,3,6,10];
    chord.major=[0,4,7];
    chord.minor=[0,3,7];
    chord.aug=[0,4,8];
    chord.dim=[0,3,6];
    chord.dim7=[0,3,6,9];
    chord.sus4=[0,5,7];
    chord.dimM7=[0,3,6,11];
    chord.aug7=[0,4,8,10];
    chord.augM7=[0,4,8,11];
     
    var chord_scale={};
    
    chord_scale.major="major7th";
    chord_scale.lydian="major7th";
    chord_scale.mixolydian="seventh";
    chord_scale.lydian7th="seventh";
    chord_scale.altered="seventh2";
    chord_scale.mixolydian="seventh";
    chord_scale.mixolydianb6="seventh";
    chord_scale.harmonic_p5="seventh";
    chord_scale.comdiminished="seventh2";
    chord_scale.wholetone="seventh2";
    chord_scale.minor="minor7th";
    chord_scale.dorian="minor7th";
    chord_scale.phrygian="minor7th";
    chord_scale.locrian="minor7thb5";
    chord_scale.locrian_2="minor7thb5";
        
    var oct=0;
    
    //$("#z").html('<option value="2">7th</option>',"after");
    
    function scale_show(){
        for(var n=0;n<25;n++){
            //console.log(n);
            $(id[n]).hide();
        }
        for(n in scale[scale_num]){
            $(id[scale[scale_num][n]+root]).show();
            $(id[scale[scale_num][n]+root]).attr('fill','#00ccff');
        }
        for(n in chord[chord_num]){
            $(id[chord[chord_num][n]+root]).show();
            $(id[chord[chord_num][n]+root]).attr('fill','red');
        }
        if(oct){
                $(id[12+root]).hide();
        }
    }
    scale_show(root,scale_num,chord_num);
    function change_root(){
        root=Number($("#key").val());
        //console.log(root);
        scale_show();    
    }
    function change_scale(){
        scale_num=$("#scale").val();
        //console.log(root);
        chord_num="non_chord";
        $("#chord").val("non_chord");
        $("#chord_scale").val("non_scale");
        oct=0;
        scale_show();    
    }
    function change_chord(){
        chord_num=$("#chord").val();
        scale_num="non_scale";
        $("#scale").val("non_scale");
        $("#chord_scale").val("non_scale")
        oct=0;
        scale_show();    
    }
    function change_chord_scale(){
        //var num=Number($("#chord_scale").val());
        //console.log(chord_num);
        scale_num=$("#chord_scale").val();
        chord_num=chord_scale[scale_num];
        $("#chord").val("non_chord");
        $("#scale").val("non_scale");
        oct=1;
        scale_show();    
    }
</script>
</body>
</html>
