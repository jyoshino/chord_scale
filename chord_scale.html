<html>
<head>
<script src="chibi-min.js"></script>
</head>

<body>
<h2>Chord & Scale</h2>

<svg width="16cm" height="4cm" viewBox="0 0 200 50">

<rect x="5" y="0" width="10" height="40" stroke="black" fill="white"/>
<rect x="15" y="0" width="10" height="40" stroke="black" fill="white"/>
<rect x="25" y="0" width="10" height="40" stroke="black" fill="white"/>
<rect x="35" y="0" width="10" height="40" stroke="black" fill="white"/>
<rect x="45" y="0" width="10" height="40" stroke="black" fill="white"/>
<rect x="55" y="0" width="10" height="40" stroke="black" fill="white"/>
<rect x="65" y="0" width="10" height="40" stroke="black" fill="white"/>
<rect x="75" y="0" width="10" height="40" stroke="black" fill="white"/>
<rect x="85" y="0" width="10" height="40" stroke="black" fill="white"/>
<rect x="95" y="0" width="10" height="40" stroke="black" fill="white"/>
<rect x="105" y="0" width="10" height="40" stroke="black" fill="white"/>
<rect x="115" y="0" width="10" height="40" stroke="black" fill="white"/>
<rect x="125" y="0" width="10" height="40" stroke="black" fill="white"/>
<rect x="135" y="0" width="10" height="40" stroke="black" fill="white"/>
<rect x="145" y="0" width="10" height="40" stroke="black" fill="white"/>
<rect x="11" y="0" width="6" height="23" stroke="black" fill="black"/>
<rect x="23" y="0" width="6" height="23" stroke="black" fill="black"/>
<rect x="41" y="0" width="6" height="23" stroke="black" fill="black"/>
<rect x="52" y="0" width="6" height="23" stroke="black" fill="black"/>
<rect x="63" y="0" width="6" height="23" stroke="black" fill="black"/>
<rect x="81" y="0" width="6" height="23" stroke="black" fill="black"/>
<rect x="93" y="0" width="6" height="23" stroke="black" fill="black"/>
<rect x="111" y="0" width="6" height="23" stroke="black" fill="black"/>
<rect x="122" y="0" width="6" height="23" stroke="black" fill="black"/>
<rect x="133" y="0" width="6" height="23" stroke="black" fill="black"/>

<circle id="C1"  fill="red" cx="10" cy="35" r="3"/>
<circle id="Db1" fill="red" cx="14" cy="19" r="3"/>

<circle id="D1"  fill="red" cx="20" cy="35" r="3"/>
<circle id="Eb1" fill="red" cx="26" cy="19" r="3"/>

<circle id="E1" fill="red" cx="30" cy="35" r="3"/>

<circle id="F1" fill="red" cx="40" cy="35" r="3"/>
<circle id="Gb1" fill="red" cx="44" cy="19" r="3"/>

<circle id="G1" fill="red" cx="50" cy="35" r="3"/>
<circle id="Ab1" fill="red" cx="55" cy="19" r="3"/>

<circle id="A1" fill="red" cx="60" cy="35" r="3"/>
<circle id="Bb1" fill="red" cx="66" cy="19" r="3"/>

<circle id="B1" fill="red" cx="70" cy="35" r="3"/>

<circle id="C2" fill="red" cx="80" cy="35" r="3"/>

<circle id="Db2" fill="red" cx="84" cy="19" r="3"/>

<circle id="D2"  fill="red" cx="90" cy="35" r="3"/>
<circle id="Eb2" fill="red" cx="96" cy="19" r="3"/>

<circle id="E2" fill="red" cx="100" cy="35" r="3"/>

<circle id="F2" fill="red" cx="110" cy="35" r="3"/>
<circle id="Gb2" fill="red" cx="114" cy="19" r="3"/>

<circle id="G2" fill="red" cx="120" cy="35" r="3"/>
<circle id="Ab2" fill="red" cx="125" cy="19" r="3"/>

<circle id="A2" fill="red" cx="130" cy="35" r="3"/>
<circle id="Bb2" fill="red" cx="136" cy="19" r="3"/>

<circle id="B2" fill="red" cx="140" cy="35" r="3"/>

<circle id="C3" fill="red" cx="150" cy="35" r="3"/>
</svg>

<br>
Root:
<form>
<select id="key" onchange="change_root()">
<option value="0" selected>C</option>
<option value="1" >C#</option>
<option value="2">D</option>
<option value="3">Eb</option>
<option value="4">E</option>
<option value="5">F</option>
<option value="6">F#</option>
<option value="7">G</option>
<option value="8">Ab</option>
<option value="9">A</option>
<option value="10">Bb</option>
<option value="11">B</option>
</select>
</form>

Scale:
<form>
<select id="scale" onchange="change_scale()">
<option value="0"></option>
<optgroup label="for M7">
<option value="1" selected>Major</option>
<option value="2">Lydian</option>
<optgroup label="for 7th">
<option value="3">Mixolydian</option>
<option value="13">Lydian 7h</option>
<option value="14">Altered</option>
<option value="16">Harmonic Minor P5</option>
<option value="15">Com.Diminished</option>
<option value="10">Wholetone</option>
<optgroup label="for minor">
<option value="4">Minor</option>
<option value="5">Dorian</option>
<option value="6">Phrygian</option>
<option value="7">Locrian</option>
<option value="8">Melodic Minor</option>
<option value="9">Harmonic Minor</option>
<optgroup label="other">
<option value="11">Diminished</option>
<option value="12">Blues</option>
</select>
</form>

Chord:
<form>
<select id="chord" onchange="change_chord()">
<option value="0" selected></option>
<optgroup label="Triads">
<option value="5">Major</option>
<option value="6">m</option>
<option value="7">aug</option>
<option value="8">m-5</option>
<option value="11">sus4</option>
<optgroup label="Seventh Chords">
<option value="1">M7</option>
<option value="2">7th</option>
<option value="3">m7</option>
<option value="4">m7-5</option>
<option value="9">mM7</option>
<option value="10">dim7</option>
<option value="12">dimM7</option>
<option value="13">aug7</option>
<option value="14">augM7</option>
</select>
</form>

Chord and Scale:
<form>
<select id="chord_scale" onchange="change_chord_scale()">
<option value="0" selected></option>
<optgroup label="for M7">
<option value="1">Major</option>
<option value="2">Lydian</option>
<optgroup label="for 7th">
<option value="3">Mixolydian</option>
<option value="13">Lydian 7h</option>
<option value="14">Altered</option>
<option value="16">Harmonic Minor P5</option>
<option value="15">Com.Diminished</option>
<option value="10">Wholetone</option>
<optgroup label="for minor 7th">
<option value="4">Minor</option>
<option value="5">Dorian</option>
<option value="6">Phrygian</option>
</select>
</form>



<script>
    var id=["#C1","#Db1","#D1","#Eb1","#E1","#F1","#Gb1","#G1","#Ab1","#A1","#Bb1","#B1",
            "#C2","#Db2","#D2","#Eb2","#E2","#F2","#Gb2","#G2","#Ab2","#A2","#Bb2","#B2","#C3"];
    //var major=[0,2,4,5,7,9,11,12];
    //var scale=[major];
    var root=0;
    var scale_num=1;
    var chord_num=0;
    
    var lydian=[0,2,4,6,7,9,11,12];
    var mixolydian=[0,2,4,5,7,9,10,12];
    var major=[0,2,4,5,7,9,11,12];
    var minor=[0,2,3,5,7,8,10,12];
    var dorian=[0,2,3,5,7,9,10,12];
    var phrygian=[0,1,3,5,7,8,10,12];
    var locrian=[0,1,3,5,6,8,10,12];
    var melodicminor=[0,2,3,5,7,9,11,12];
    var harmonicminor=[0,2,3,5,7,8,11,12];
    var wholetone=[0,2,4,6,8,10,12];
    var diminished=[0,2,3,5,6,8,9,11,12];
    var blues=[0,3,5,6,7,10,12];
    var lydian7th=[0,2,4,6,7,9,10,12];
    var altered=[0,1,3,4,6,8,10,12];
    var comdiminished=[0,1,3,4,6,7,9,10,12];
    var harmonic_p5=[0,1,4,5,7,8,10,12];

    var non_chord=[];
    var majar7th=[0,4,7,11];
    var seventh=[0,4,7,10];
    var seventh2=[0,4,10];
    var minor7th=[0,3,7,10];
    var minorM7=[0,3,7,11];
    var minor7thb5=[0,3,6,10];
    var major_chord=[0,4,7];
    var minor_chord=[0,3,7];
    var aug=[0,4,8];
    var dim=[0,3,6];
    var dim7=[0,3,6,9];
    var sus4=[0,5,7];
    var dimM7=[0,3,6,11];
    var aug7=[0,4,8,10];
    var augM7=[0,4,8,11];
    
    var scale=[non_chord,major,lydian,mixolydian,minor,dorian,phrygian,locrian,melodicminor,harmonicminor,wholetone,
                diminished,blues,lydian7th,altered,comdiminished,harmonic_p5];
                
    var chord=[non_chord,majar7th,seventh,minor7th,minor7thb5,major_chord,minor_chord,aug,dim,minorM7,dim7,sus4,dimM7,aug7,augM7,seventh2];   
    
    var chord_scale=[0,1,1,2,3,3,3,2,2,2,15,2,2,2,15,2,2,2,2,2,2,2,2,2,2,2,2,2,2];
    
    var oct=0;
    
    function scale_show(){
        for(var n=0;n<25;n++){
            //console.log(n);
            $(id[n]).hide();
        }
        for(n in scale[scale_num]){
            $(id[scale[scale_num][n]+root]).show();
            $(id[scale[scale_num][n]+root]).attr('fill','#00ccff');
        }
        for(n in chord[chord_num]){
            $(id[chord[chord_num][n]+root]).show();
            $(id[chord[chord_num][n]+root]).attr('fill','red');
        }
        if(oct){
                $(id[12+root]).hide();
        }
    }
    scale_show(root,scale_num,chord_num);
    function change_root(){
        root=Number($("#key").val());
        //console.log(root);
        scale_show();    
    }
    function change_scale(){
        scale_num=Number($("#scale").val());
        //console.log(root);
        chord_num=0;
        $("#chord").val("0");
        $("#chord_scale").val("0");
        oct=0;
        scale_show();    
    }
    function change_chord(){
        chord_num=Number($("#chord").val());
        //console.log(chord_num);
        scale_num=0;
        $("#scale").val("0");
        $("#chord_scale").val("0")
        oct=0;
        scale_show();    
    }
    function change_chord_scale(){
        var num=Number($("#chord_scale").val());
        //console.log(chord_num);
        scale_num=num;
        chord_num=chord_scale[num];
        $("#chord").val("0");
        $("#scale").val("0");
        oct=1;
        scale_show();    
    }
</script>
</body>
</html>
